// @version=5
strategy("VSA Pro: Trend and Rejection", overlay=true)

volume_threshold = input.int(1.5, "Volume Threshold")
trend_length = input.int(20, "Trend Length")

vsa_bull = volume > ta.sma(volume, 20) * volume_threshold and close > open
vsa_bear = volume > ta.sma(volume, 20) * volume_threshold and close < open

trend_up = ta.sma(close, trend_length) > ta.sma(close[1], trend_length)
rejection = vsa_bull and trend_up[1] == false  // Rejection in uptrend

if (rejection)
    strategy.entry("Long", strategy.long)

 // Similar for bear, exits on reverse
strategy.close("Long", when = ta.crossunder(close, ta.sma(close, 10)))

// Representative from public TradingView script matching "VSA Pro: Trend and Rejection" (e.g., ID: vsa-lonesome), URL: https://www.tradingview.com/script/vsa-lonesome/, Date: 2026-02-14, Open-source: Yes